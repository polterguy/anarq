
/*
 * Returns all pages to caller, but only their URLs and names.
 */
.description:Returns all pages in the system to caller, but only their URLs and their names, not the content


/*
 * Connects to database.
 */
data.connect:[generic|anarq]
   database-type:mysql


   /*
    * Invokes read slot.
    */
   data.read
      database-type:mysql
      table:pages
      limit:-1
      columns
         url
         name


   /*
    * Sanity check that we got a result from above invocation.
    */
   if
      not
         exists:x:@data.read/*/*
      .lambda
         return-value:"[]"


   /*
    * Returns result to caller.
    */
   return-nodes:x:@data.read/*
